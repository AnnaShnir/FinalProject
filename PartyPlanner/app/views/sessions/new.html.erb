
<div class="user-box">

  <p>Are -YOU- planning to party on July 4th?</p>

 <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>

    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();

        document.getElementById('user_name').value = profile.getName();
        document.getElementById('user_email').value = profile.getEmail();

        document.getElementById('new_user').submit();

        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log("Name: " + profile.getName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
      };
    </script>

  <%= form_for(@user, html: {class: 'pure-form pure-form-aligned user_form'}) do |f| %>

  <% if @user.errors.any? %>
    <div id="error-explanation">
      <p><%= pluralize(@user.errors.count, "error")%> prohibited this user from being saved:</p>
      <ul>
      <% @user.errors.full_messages.each do |message| %>
      <li style="color: red"><%= message %></li>
      <% end %>
    </ul>
    </div>
    <% end %>


<div style="display: none;">

  <div class="pure-control-group">
    <label>Name</label>
    <%= f.text_field :name, placeholder: 'Name' %>
  </div>

  <div class="pure-control-group">
    <%= f.label :email %>
    <%= f.text_field :email, placeholder: 'Email' %>
  </div>
</div>

</div>



  <% end %>